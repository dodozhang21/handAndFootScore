<!DOCTYPE html>
<html>
    <head>
    	<title>Hand and Foot Score</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />
    
        <style>
            .scoreColumn {
            	text-align: right;
            	padding-right: 20px;
            }
           
            .scoreAlt1 {
            	padding: 10px 0;
            	background-color:#111;
            }
            
            .scoreAlt2 {
            	padding: 10px 0;
            }
            
            .totalForHand {
            	border-top: 1px solid #fff;
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>
  
        <!-- game js -->
        <script src="js/Hand.js"></script>
        <script src="js/Game.js"></script>
    </head>
    <body>
    	

		
 
        <!-- home -->
        <div id="home" data-role="page" data-theme="a" data-title="Hand and Foot Score">
            <div data-theme="" data-role="header">
                <h3>
                    Hand and Foot Score
                </h3>
            </div>
            
            <div data-role="content">
                <a data-role="button"  data-theme="b" href="#newGame">
                    New Game
                </a>
                <!--  
                <a data-role="button"  href="#scoreHistory">
                    Score History
                </a>
                -->
            </div>
        </div><!-- /home -->
        
        
        <!-- newGame -->
        <div id="newGame" data-role="page" data-theme="a">
			<div data-theme="" data-role="header">	
			 	<h3>Enter Team Names</h3>
			</div>
			  
		  	<div data-role="content">
	          <label for="team1" class="ui-hidden-accessible ui-input-text">Team 1:</label>
	          <input class="ui-input-text ui-body-a ui-corner-all ui-shadow-inset" name="team1" id="team1" placeholder="Team 1" data-theme="a" type="text">

	          <label for="team2" class="ui-hidden-accessible">Team 2:</label>
	          <input class="ui-input-text ui-body-a ui-corner-all ui-shadow-inset" name="team2" id="team2" placeholder="Team 2" data-theme="a" type="text">
	    	  
	    	  <br />
	    	  <a data-role="button" data-theme="b" id="startGame">Start Game</a>
             </div>
			
		</div><!-- /newGame -->
		
		
		<!-- gameBoard -->
		<div id="gameBoard" data-transition="pop" data-corners="true" data-shadow="true" data-role="page" data-theme="a">
			<div data-theme="" data-role="header" data-position="fixed">	
				<h3 style="text-align:center;">
					Hand and Foot on <span id="todaysDate"></span>
				</h3>
    			<a href="#addHandTeam1" data-icon="plus" style="right:auto;" data-theme="b">Add Hand for <span id="team1Name"></span></a>
    			<a href="#addHandTeam2" data-icon="plus" data-theme="b">Add Hand for <span id="team2Name"></span></a>
			</div>
				  
		  	<div data-role="content" style="padding: 15px">
		  		<div id="gameScoresArea">
		  		<div class="ui-grid-a ui-corner-all scoreAlt1">
					<div class="ui-block-a scoreColumn">
						<a class="editHand show-page-loading-msg" data-role="button" data-theme="" data-inline="true" data-icon="gear">Edit Hand</a>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Bonus:</strong></div>
							<div class="ui-block-b scoreColumn">100</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Books:</strong></div>
							<div class="ui-block-b scoreColumn">1500</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Points:</strong></div>
							<div class="ui-block-b scoreColumn">255</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Total for Hand:</strong></div>
							<div class="ui-block-b scoreColumn totalForHand">1500</div>
						</div>
					</div>
					<div class="ui-block-b scoreColumn">
						<a class="editHand" data-role="button" data-theme="" data-inline="true" data-icon="gear">Edit Hand</a>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Bonus:</strong></div>
							<div class="ui-block-b scoreColumn">100</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Books:</strong></div>
							<div class="ui-block-b scoreColumn">1500</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Points:</strong></div>
							<div class="ui-block-b scoreColumn">255</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Total for Hand:</strong></div>
							<div class="ui-block-b scoreColumn totalForHand">1500</div>
						</div>
					</div>
				</div><!-- /grid-a -->
				
				
				<div class="ui-grid-a ui-corner-all scoreAlt2">
					<div class="ui-block-a scoreColumn">
						<a class="editHand" data-role="button" data-theme="" data-inline="true" data-icon="gear">Edit Hand</a>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Bonus:</strong></div>
							<div class="ui-block-b scoreColumn">100</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Books:</strong></div>
							<div class="ui-block-b scoreColumn">1500</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Points:</strong></div>
							<div class="ui-block-b scoreColumn">255</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Total for Hand:</strong></div>
							<div class="ui-block-b scoreColumn totalForHand">1500</div>
						</div>
					</div>
					<div class="ui-block-b scoreColumn">
						<a class="editHand" data-role="button" data-theme="" data-inline="true" data-icon="gear">Edit Hand</a>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Bonus:</strong></div>
							<div class="ui-block-b scoreColumn">100</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Books:</strong></div>
							<div class="ui-block-b scoreColumn">1500</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Points:</strong></div>
							<div class="ui-block-b scoreColumn">255</div>
						</div>
						<div class="ui-grid-a">
							<div class="ui-block-a scoreColumn"><strong>Total for Hand:</strong></div>
							<div class="ui-block-b scoreColumn totalForHand">1500</div>
						</div>
					</div>
				</div><!-- /grid-a -->
				</div>
				
		  	
		  		<fieldset class="ui-grid-a">
		  			<div class="ui-block-a scoreColumn"><button data-theme="e" data-inline="true" id="team1TotalButton">Total: <span id="team1TotalPoints">0</span></button></div>
		  			<div class="ui-block-b scoreColumn" style="text-align: right"><button data-theme="e" data-inline="true" id="team2TotalButton">Total: <span id="team2TotalPoints">0</span></button></div>
		  		</fieldset>
		  		<fieldset class="ui-grid-a" style="padding-top: 20px;">
		  			<div class="ui-block-a"><a data-role="button" data-theme="b" class="doneConfirmation">Done</a></div>
		  			<div class="ui-block-b"><a data-role="button" data-theme="b" data-rel="popup" href="#toBeImplemented">Submit Scores</a></div>
		  		</fieldset>
		  		
		  		<div data-role="popup" id="doneConfirmation" data-overlay-theme="a" data-theme="c" style="max-width:350px;" class="ui-corner-all">
					<div data-role="header" data-theme="a" class="ui-corner-top">
						<h1>Confirmation</h1>
					</div>
					<div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
						<h3 class="ui-title">Are you sure you are done?</h3>
						<p>This will reset all of the scores and this action cannot be undone.</p>
						<a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">No, cancel</a>    
						<a id="goHome" data-role="button" data-inline="true" data-rel="back" data-theme="b">Yes, I'm sure</a>  
					</div>
				</div>
				
				<div data-role="popup" id="toBeImplemented" data-overlay-theme="a" data-theme="e" class="ui-corner-all">
					<a href="#" data-rel="back" data-role="button" data-theme="e" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
					<div data-role="header" data-theme="e" class="ui-corner-top">
						<h1>To be implemented</h1>
					</div>
					<div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
						<h3 class="ui-title" style="text-align: center">^___^</h3>
					</div>
				</div>
		  	</div>
			
		</div><!-- /gameBoard -->
		
        
        
        
		  		
		  		
		<!-- addHandTeam1 -->  		
	 	<div data-role="page" id="addHandTeam1" data-theme="a" data-title="Add Hand">
			<div data-theme="" data-role="header">
				<h3>Add Hand for <span class="team1Name"></span></h3>
			</div>
			<div data-role="content" style="padding: 15px">
	          <label for="team1-bonus">Bonus:</label>
	          <input type="number" id="team1-bonus" class="bonus" placeholder="0" data-theme="a" />
	
	          <label for="team1-books">Books:</label>
	          <input type="number" id="team1-books" class="books" placeholder="0" data-theme="a" />
	          
	          <label for="team1-points">Points:</label>
	          <input type="number" id="team1-points" class="points" placeholder="0" data-theme="a" />
				<br />
	    	  <a data-role="button" data-theme="b" class="addHand">Add Hand</a>
			</div>
		</div><!-- /addHandTeam1 -->
		
		<!-- addHandTeam2 -->  		
	 	<div data-role="page" id="addHandTeam2" data-theme="a" data-title="Add Hand">
			<div data-theme="" data-role="header">
				<h3>Add Hand for <span class="team2Name"></span></h3>
			</div>
			<div data-role="content" style="padding: 15px">
	          <label for="team2-bonus">Bonus:</label>
	          <input type="number" id="team2-bonus" class="bonus" placeholder="0" data-theme="a" />
	
	          <label for="team2-books">Books:</label>
	          <input type="number" id="team2-books" class="books" placeholder="0" data-theme="a" />
	          
	          <label for="team2-points">Points:</label>
	          <input type="number" id="team2-points" class="points" placeholder="0" data-theme="a" />
				<br />
			  <a data-role="button" data-theme="b" class="addHand">Add Hand</a>
			</div>
		</div><!-- /addHandTeam2 -->
        
        
        
        
        <script>
        	var game = new Game();
        	
        	$( document ).on( "pageinit", function() {
        		$('.showLoading').click(function() {
        			$.mobile.loading( 'show' );
        		});
        	});
        	
        	$( '#newGame' ).on("pageinit", function() {
        		$('#startGame').click(function() {
        			initGameBoard();
        		});
        	});
        	
        	$( '#newGame' ).on("pagebeforeshow", function() {
        		// clear inputs
        		$('#team1').val('');
        		$('#team2').val('');
        	});
        	
        	$( '#gameBoard' ).on("pagebeforeshow", function() {
        		console.log('gameBoard pagebeforeshow');
        		$.mobile.loading( 'hide' );
        	});
        	
        	$( '#gameBoard' ).on("pageinit", function() {
        		console.log('gameBoard pageinit');
        		$('a.doneConfirmation').click(function (e) {
    	    	    e.stopImmediatePropagation();
    	    	    e.preventDefault();
        			$('#doneConfirmation').popup("open");
        		});
        		$('#goHome').click(function (e) {
    	    	    e.stopImmediatePropagation();
    	    	    e.preventDefault();
    	    	    $.mobile.changePage ($( '#home' ));
        		});
        	});
        	
        	$( '#addHandTeam1' ).on("pageinit", function() {
        		loadTeamNames();
        		clearInputs();
        		
        		$('#addHandTeam1 .addHand').click(function() {
	        		var hand = getHand('team1');
	        		game.addHandForTeam1(hand);
// 	        		console.log('added hand to team 1');
// 	        		console.log(game);
	        		loadGameBoard();
        		});
        	});
        	
        	$( '#addHandTeam2' ).on("pageinit", function() {
        		loadTeamNames();
        		clearInputs();
        		
        		$('#addHandTeam2 .addHand').click(function() {
            		var hand = getHand('team2');
            		game.addHandForTeam2(hand);
// 	        		console.log('added hand to team 2');
// 	        		console.log(game);
	        		loadGameBoard();
        		});
        	});
        	
        	function initGameBoard() {
        		var d = new Date();
        	    var curr_date = d.getDate();
        	    var curr_month = d.getMonth() + 1; //Months are zero based
        	    var curr_year = d.getFullYear();
        	    var todaysDate = curr_month + "/" + curr_date + "/" + curr_year;
        	    
        		var team1 = $('#team1').val();
        		var team2 = $('#team2').val();
        		//console.log(team1);
        		//console.log(team2);
        		
        		game = new Game(team1, team2);
        		
        		$('#team1Name').html(game.getTeam1());
        		$('#team2Name').html(game.getTeam2());
        		$('#todaysDate').html(todaysDate);
        		
        		$('#team1TotalPoints').html('0');
        		$('#team2TotalPoints').html('0');
        		$('#gameScoresArea').remove();
        		
        		$.mobile.changePage ($( '#gameBoard' ));
        	}
        	function getHand(prefix) {
        		var bonus = $('#' + prefix + '-bonus').val();
        		var books = $('#' + prefix + '-books').val();
        		var points = $('#' + prefix + '-points').val();
        		
//         		console.log('bonus = ' + bonus);
//         		console.log('books = ' + books);
//         		console.log('points = ' + points);
        		
        		var hand = new Hand(bonus, books, points);
        		return hand;
        	}
			function loadGameBoard() {
				$.mobile.loading( 'show' );
				
				console.log('team 1 total = ' + game.getTeam1Total());
				console.log('team 2 total = ' + game.getTeam2Total());
        		
        		// get totals
        		$('#team1TotalPoints').html(game.getTeam1Total());
        		$('#team2TotalPoints').html(game.getTeam2Total());
        		
        		$.mobile.changePage ($( '#gameBoard' ));
			}
        	function loadTeamNames() {
        		$('.team1Name').html(game.getTeam1());
        		$('.team2Name').html(game.getTeam2());
        	}
        	function clearInputs() {
        		$('input.bonus,input.books,input.points').val('');
        	}
        </script>
    </body>
</html>